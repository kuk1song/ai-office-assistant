graph TB
    subgraph "ğŸ—ï¸ AI Office Assistant - æœ€ç»ˆä¼˜åŒ–é¡¹ç›®ç»“æ„"
        subgraph SRC["ğŸ“ src/"]
            subgraph CORE["ğŸ¯ core/"]
                AGENT[ğŸ“„ agent_system.py<br/>ğŸ¤– AIæ™ºèƒ½ä½“ç³»ç»Ÿ<br/>ç»Ÿä¸€å¼•æ“æ¥å£]
                PARSER[ğŸ“„ document_parser.py<br/>ğŸ“„ æ–‡æ¡£è§£æå™¨<br/>å¤šæ ¼å¼å¤„ç†+OCR]
                SESSION[ğŸ“„ session.py<br/>ğŸ’¾ ä¼šè¯ç®¡ç†å™¨<br/>çŠ¶æ€ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸ]

                subgraph MODELS["ğŸ¤– models/"]
                    AIM[ğŸ“„ ai_model_manager.py<br/>AIæ¨¡å‹ç®¡ç†å™¨]
                    LLP[ğŸ“„ llm_provider.py<br/>è¯­è¨€æ¨¡å‹æä¾›å™¨]
                    EMP[ğŸ“„ embedding_provider.py<br/>åµŒå…¥æ¨¡å‹æä¾›å™¨]
                end

                subgraph KNOWLEDGE["ğŸ“š knowledge/"]
                    KBM[ğŸ“„ knowledge_base_manager.py<br/>çŸ¥è¯†åº“ç®¡ç†å™¨]
                    DP[ğŸ“„ document_processor.py<br/>æ–‡æ¡£å¤„ç†å™¨]
                    VSM[ğŸ“„ vector_store_manager.py<br/>å‘é‡å­˜å‚¨ç®¡ç†å™¨]
                    PM[ğŸ“„ persistence_manager.py<br/>æŒä¹…åŒ–ç®¡ç†å™¨]
                end

                subgraph ORCHESTRATION["âš¡ orchestration/"]
                    OM[ğŸ“„ orchestration_manager.py<br/>ç¼–æ’ç®¡ç†å™¨]
                    RR[ğŸ“„ rag_retriever.py<br/>RAGæ£€ç´¢å™¨]
                    AE[ğŸ“„ agent_executor.py<br/>Agentæ‰§è¡Œå™¨]
                    TR[ğŸ“„ tool_registry.py<br/>å·¥å…·æ³¨å†Œè¡¨]
                end

                subgraph TOOLS["ğŸ”§ tools/"]
                    subgraph KB_TOOLS["knowledge_base/"]
                        QA[ğŸ“„ knowledge_qa.py<br/>çŸ¥è¯†åº“é—®ç­”]
                    end
                    subgraph DOC_TOOLS["document/"]
                        SUM[ğŸ“„ document_summarizer.py<br/>æ–‡æ¡£æ‘˜è¦å™¨]
                    end
                    subgraph EXTRACTORS["extractors/"]
                        SPEC[ğŸ“„ technical_spec_extractor.py<br/>è§„æ ¼æå–å™¨]
                    end
                    subgraph CALC_TOOLS["calculators/"]
                        LINK[ğŸ“„ link_budget_calculator.py<br/>é“¾è·¯é¢„ç®—è®¡ç®—]
                    end
                end
            end

            subgraph UI["ğŸ–¥ï¸ ui/"]
                subgraph COMPONENTS["components/"]
                    KB[ğŸ“„ knowledge_base.py<br/>çŸ¥è¯†åº“ç•Œé¢]
                    UPLOAD[ğŸ“„ upload.py<br/>ä¸Šä¼ ç•Œé¢]
                    CHAT[ğŸ“„ chat.py<br/>èŠå¤©ç•Œé¢]
                end
                MAIN[ğŸ“„ main.py<br/>ä¸»ç•Œé¢]
            end
        end

        subgraph DOCS["ğŸ“š docs/"]
            PROJECT[ğŸ“„ project-roadmap.md<br/>é¡¹ç›®è·¯çº¿å›¾]
            TECH[ğŸ“„ technical-architecture.md<br/>æŠ€æœ¯æ¶æ„æ–‡æ¡£]
            RESEARCH[ğŸ“„ research-log.md<br/>ç ”ç©¶æ—¥å¿—]
            BOOTSTRAP[ğŸ“„ bootstrapping-prompt.md<br/>ä¸Šä¸‹æ–‡å·¥ç¨‹]

            subgraph ADR["ğŸ“œ adr/"]
                ADR1[ğŸ“„ 001-use-adr.md<br/>é‡‡ç”¨ADR]
                ADR2[ğŸ“„ 002-kebab-case.md<br/>æ–‡ä»¶å‘½å]
                ADR3[ğŸ“„ 003-summarize-fix.md<br/>æ‘˜è¦ä¿®å¤]
                ADR4[ğŸ“„ 004-tool-restructure.md<br/>å·¥å…·é‡æ„]
                ADR5[ğŸ“„ 005-kb-interface-fix.md<br/>æ¥å£ä¿®å¤]
            end

            subgraph TOOLS_DOC["ğŸ”§ tools/"]
                TOOL1[ğŸ“„ knowledge-base-qa.md<br/>çŸ¥è¯†åº“é—®ç­”å·¥å…·]
                TOOL2[ğŸ“„ document-summarizer.md<br/>æ–‡æ¡£æ‘˜è¦å·¥å…·]
                TOOL3[ğŸ“„ technical-spec-extractor.md<br/>è§„æ ¼æå–å·¥å…·]
                TOOL4[ğŸ“„ link-budget-calculator.md<br/>é“¾è·¯é¢„ç®—å·¥å…·]
            end
        end

        subgraph CONFIG["âš™ï¸ é…ç½®æ–‡ä»¶"]
            APP[ğŸ“„ app.py<br/>åº”ç”¨å…¥å£]
            REQ[ğŸ“„ requirements.txt<br/>ä¾èµ–æ¸…å•]
            README[ğŸ“„ README.md<br/>é¡¹ç›®è¯´æ˜]
        end
    end

    subgraph NAMING["ğŸ·ï¸ å‘½åä¼˜åŒ–æˆæœ"]
        OLD1[âŒ engine.py<br/>æ¨¡ç³Šä¸æ¸…]
        NEW1[âœ… agent_system.py<br/>AIæ™ºèƒ½ä½“ç³»ç»Ÿ]

        OLD2[âŒ parser.py<br/>è§£æä»€ä¹ˆï¼Ÿ]
        NEW2[âœ… document_parser.py<br/>æ–‡æ¡£è§£æå™¨]

        OLD3[âŒ conversation/]
        NEW3[âœ… orchestration/<br/>ç¼–æ’å±‚]

        OLD4[âŒ technical/]
        NEW4[âœ… domain/<br/>é¢†åŸŸå·¥å…·]
    end

    %% ä¾èµ–å…³ç³»
    AGENT --> MODELS
    AGENT --> KNOWLEDGE
    AGENT --> ORCHESTRATION
    ORCHESTRATION --> TOOLS
    UI --> AGENT

    %% å‘½åä¼˜åŒ–å…³ç³»
    OLD1 -.->|é‡å‘½å| NEW1
    OLD2 -.->|é‡å‘½å| NEW2
    OLD3 -.->|é‡å‘½å| NEW3
    OLD4 -.->|é‡å‘½å| NEW4

    %% æ ·å¼
    style AGENT fill:#ff9999,stroke:#333,stroke-width:3px
    style PARSER fill:#99ccff,stroke:#333,stroke-width:3px
    style MODELS fill:#fff3e0
    style KNOWLEDGE fill:#e8f5e8
    style ORCHESTRATION fill:#e1f5fe
    style TOOLS fill:#fff8e1
    style UI fill:#f3e5f5
    style DOCS fill:#fce4ec
    style NAMING fill:#fff9c4,stroke:#f57c00,stroke-width:2px
    style NEW1 fill:#c8e6c9
    style NEW2 fill:#c8e6c9
    style NEW3 fill:#c8e6c9
    style NEW4 fill:#c8e6c9
    style OLD1 fill:#ffcdd2
    style OLD2 fill:#ffcdd2
    style OLD3 fill:#ffcdd2
    style OLD4 fill:#ffcdd2

